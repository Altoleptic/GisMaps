<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Coherence Map</title>
  <style>
    body {
      margin: 0;
      background: #111;
      overflow: hidden;
    }
    #container {
      width: 100vw;
      height: 100vh;
      position: relative;
      overflow: hidden;
      cursor: grab;
    }
    #img {
      position: absolute;
      top: 50%;
      left: 50%;
      transform-origin: center center;
      max-width: none;
      max-height: none;
    }
  </style>
</head>
<body>
  <div id="container">
    <img id="img" src="map_method_B_texture.jpg" alt="Coherence Map">
  </div>

  <script>
    const img = document.getElementById('img');
    const container = document.getElementById('container');

    let scale = 1;
    let pos = { x: 0, y: 0 };
    let isDragging = false;
    let start = { x: 0, y: 0 };

    img.onload = () => {
      const imgW = img.naturalWidth;
      const imgH = img.naturalHeight;
      const winW = window.innerWidth;
      const winH = window.innerHeight;

      scale = Math.min(winW / imgW, winH / imgH);
      img.style.transform = `translate(-50%, -50%) scale(${scale})`;
    };

    container.addEventListener('wheel', e => {
      e.preventDefault();
      const delta = e.deltaY > 0 ? 0.9 : 1.1;
      scale *= delta;
      img.style.transform = `translate(-50%, -50%) scale(${scale})`;
    });

    container.addEventListener('mousedown', e => {
      isDragging = true;
      start.x = e.clientX - pos.x;
      start.y = e.clientY - pos.y;
      container.style.cursor = 'grabbing';
    });

    container.addEventListener('mousemove', e => {
      if (!isDragging) return;
      pos.x = e.clientX - start.x;
      pos.y = e.clientY - start.y;
      img.style.left = `calc(50% + ${pos.x}px)`;
      img.style.top = `calc(50% + ${pos.y}px)`;
    });

    container.addEventListener('mouseup', () => {
      isDragging = false;
      container.style.cursor = 'grab';
    });

    container.addEventListener('mouseleave', () => {
      isDragging = false;
      container.style.cursor = 'grab';
    });
  </script>
</body>
</html>
